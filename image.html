<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImageResizer Pro - Advanced Image Processing Tool</title>
    <meta name="description" content="Professional image resizer tool with watermark, crop, rotate, batch processing, format conversion, and social media presets. Resize, compress, and convert images instantly.">
    <meta name="keywords" content="image resize, photo resizer, batch resize, image converter, image optimizer, photo editor, image compression, watermark, crop, rotate, social media">
    <meta name="author" content="ImageResizer Pro">
    <meta property="og:title" content="ImageResizer Pro - Advanced Image Processing Tool">
    <meta property="og:description" content="Professional image resizer with watermark, crop, rotate, batch processing and social media presets">
    <meta property="og:type" content="website">
    <meta name="robots" content="index, follow">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .drop-zone {
            transition: all 0.3s ease;
            background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='%239CA3AF' stroke-width='3' stroke-dasharray='10' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e");
        }
        
        .drop-zone.dragover {
            background-color: rgba(99, 102, 241, 0.1);
            border-color: #6366f1;
            transform: scale(1.02);
        }
        
        .slider {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            cursor: pointer;
        }
        
        .slider::-webkit-slider-track {
            background: #e5e7eb;
            height: 6px;
            border-radius: 3px;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            background: #6366f1;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            margin-top: -7px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.2s;
        }
        
        .slider::-webkit-slider-thumb:hover {
            background: #4f46e5;
            transform: scale(1.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .crop-container {
            position: relative;
            display: inline-block;
            cursor: crosshair;
            max-width: 100%;
            overflow: hidden;
        }
        
        .crop-box {
            position: absolute;
            border: 2px solid #6366f1;
            background: rgba(99, 102, 241, 0.1);
            pointer-events: none;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        }
        
        .tab-active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .nav-active {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
        }
        
        .feature-card {
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-lg">
                        <i class="fas fa-image text-2xl text-purple-600"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">ImageResizer Pro</h1>
                        <p class="text-purple-100 text-sm">Advanced Image Processing Tool</p>
                    </div>
                </div>
                <nav class="hidden md:flex space-x-6">
                    <button onclick="showSection('resizer')" id="nav-resizer" class="px-4 py-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition nav-active">
                        <i class="fas fa-expand-arrows-alt mr-2"></i>Resizer
                    </button>
                    <button onclick="showSection('editor')" id="nav-editor" class="px-4 py-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition">
                        <i class="fas fa-edit mr-2"></i>Editor
                    </button>
                    <button onclick="showSection('batch')" id="nav-batch" class="px-4 py-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition">
                        <i class="fas fa-layer-group mr-2"></i>Batch
                    </button>
                    <button onclick="showSection('converter')" id="nav-converter" class="px-4 py-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition">
                        <i class="fas fa-exchange-alt mr-2"></i>Converter
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Feature Cards -->
        <div class="grid md:grid-cols-4 gap-4 mb-8">
            <div class="feature-card glass-effect rounded-xl p-4 text-center">
                <i class="fas fa-crop text-3xl text-purple-600 mb-2"></i>
                <h3 class="font-semibold">Crop Tool</h3>
                <p class="text-sm text-gray-600">Crop images with precision</p>
            </div>
            <div class="feature-card glass-effect rounded-xl p-4 text-center">
                <i class="fas fa-sync-alt text-3xl text-purple-600 mb-2"></i>
                <h3 class="font-semibold">Rotate & Flip</h3>
                <p class="text-sm text-gray-600">Rotate and flip images</p>
            </div>
            <div class="feature-card glass-effect rounded-xl p-4 text-center">
                <i class="fas fa-stamp text-3xl text-purple-600 mb-2"></i>
                <h3 class="font-semibold">Watermark</h3>
                <p class="text-sm text-gray-600">Add custom watermarks</p>
            </div>
            <div class="feature-card glass-effect rounded-xl p-4 text-center">
                <i class="fas fa-file-archive text-3xl text-purple-600 mb-2"></i>
                <h3 class="font-semibold">Bulk Export</h3>
                <p class="text-sm text-gray-600">Download as ZIP</p>
            </div>
        </div>

        <!-- Resizer Section -->
        <section id="resizer-section" class="mb-12">
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Upload Area -->
                <div class="glass-effect rounded-2xl p-6 shadow-xl">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-800">
                        <i class="fas fa-upload mr-2 text-purple-600"></i>Upload Image
                    </h2>
                    
                    <div id="dropZone" class="drop-zone rounded-xl p-12 text-center cursor-pointer hover:bg-gray-50 transition">
                        <i class="fas fa-cloud-upload-alt text-6xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-2">Drag & drop your image here</p>
                        <p class="text-sm text-gray-500 mb-4">or</p>
                        <label for="fileInput" class="btn-primary text-white px-6 py-3 rounded-lg inline-block cursor-pointer">
                            Browse Files
                        </label>
                        <input type="file" id="fileInput" class="hidden" accept="image/*" multiple>
                        <p class="text-xs text-gray-400 mt-4">Supports: JPG, PNG, GIF, WebP, BMP (Max 10MB)</p>
                    </div>
                    
                    <!-- Image Info -->
                    <div id="imageInfo" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                        <h3 class="font-semibold text-gray-700 mb-2">Image Information</h3>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div><span class="text-gray-500">Name:</span> <span id="imageName" class="font-medium"></span></div>
                            <div><span class="text-gray-500">Size:</span> <span id="imageSize" class="font-medium"></span></div>
                            <div><span class="text-gray-500">Dimensions:</span> <span id="imageDimensions" class="font-medium"></span></div>
                            <div><span class="text-gray-500">Type:</span> <span id="imageType" class="font-medium"></span></div>
                        </div>
                    </div>
                </div>
                
                <!-- Resize Options -->
                <div class="glass-effect rounded-2xl p-6 shadow-xl">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-800">
                        <i class="fas fa-sliders-h mr-2 text-purple-600"></i>Resize Options
                    </h2>
                    
                    <!-- Social Media Presets -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Social Media Presets</label>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="setSocialPreset('instagram')" class="preset-btn px-3 py-2 bg-pink-100 hover:bg-pink-200 rounded-lg text-sm transition">
                                <i class="fab fa-instagram mr-1"></i>Instagram Post
                            </button>
                            <button onclick="setSocialPreset('instagram-story')" class="preset-btn px-3 py-2 bg-pink-100 hover:bg-pink-200 rounded-lg text-sm transition">
                                <i class="fab fa-instagram mr-1"></i>Instagram Story
                            </button>
                            <button onclick="setSocialPreset('facebook')" class="preset-btn px-3 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg text-sm transition">
                                <i class="fab fa-facebook mr-1"></i>Facebook Cover
                            </button>
                            <button onclick="setSocialPreset('twitter')" class="preset-btn px-3 py-2 bg-sky-100 hover:bg-sky-200 rounded-lg text-sm transition">
                                <i class="fab fa-twitter mr-1"></i>Twitter Header
                            </button>
                            <button onclick="setSocialPreset('youtube')" class="preset-btn px-3 py-2 bg-red-100 hover:bg-red-200 rounded-lg text-sm transition">
                                <i class="fab fa-youtube mr-1"></i>YouTube Thumbnail
                            </button>
                            <button onclick="setSocialPreset('linkedin')" class="preset-btn px-3 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg text-sm transition">
                                <i class="fab fa-linkedin mr-1"></i>LinkedIn Banner
                            </button>
                        </div>
                    </div>
                    
                    <!-- Standard Presets -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Standard Presets</label>
                        <div class="grid grid-cols-3 gap-2">
                            <button onclick="setPresetSize(320, 240)" class="preset-btn px-3 py-2 bg-gray-100 hover:bg-purple-100 rounded-lg text-sm transition">320×240</button>
                            <button onclick="setPresetSize(640, 480)" class="preset-btn px-3 py-2 bg-gray-100 hover:bg-purple-100 rounded-lg text-sm transition">640×480</button>
                            <button onclick="setPresetSize(800, 600)" class="preset-btn px-3 py-2 bg-gray-100 hover:bg-purple-100 rounded-lg text-sm transition">800×600</button>
                            <button onclick="setPresetSize(1024, 768)" class="preset-btn px-3 py-2 bg-gray-100 hover:bg-purple-100 rounded-lg text-sm transition">1024×768</button>
                            <button onclick="setPresetSize(1280, 720)" class="preset-btn px-3 py-2 bg-gray-100 hover:bg-purple-100 rounded-lg text-sm transition">1280×720</button>
                            <button onclick="setPresetSize(1920, 1080)" class="preset-btn px-3 py-2 bg-gray-100 hover:bg-purple-100 rounded-lg text-sm transition">1920×1080</button>
                        </div>
                    </div>
                    
                    <!-- Custom Dimensions - FIXED VERSION -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Custom Dimensions</label>
                        <div class="flex items-center space-x-3">
                            <div class="flex-1">
                                <label class="text-xs text-gray-500">Width (px)</label>
                                <input type="number" id="widthInput" placeholder="Width" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                            <div class="text-gray-500 pt-6">
                                <i class="fas fa-link"></i>
                            </div>
                            <div class="flex-1">
                                <label class="text-xs text-gray-500">Height (px)</label>
                                <input type="number" id="heightInput" placeholder="Height" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="mt-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="maintainAspect" class="mr-2 text-purple-600 focus:ring-purple-500">
                                <span class="text-sm text-gray-700">Maintain aspect ratio</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Percentage Resize -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Resize by Percentage: <span id="percentageValue" class="text-purple-600 font-semibold">100%</span>
                        </label>
                        <input type="range" id="percentageSlider" min="10" max="200" value="100" class="slider w-full">
                    </div>
                    
                    <!-- Quality Settings -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Quality: <span id="qualityValue" class="text-purple-600 font-semibold">90%</span>
                        </label>
                        <input type="range" id="qualitySlider" min="10" max="100" value="90" class="slider w-full">
                    </div>
                    
                    <!-- Format Selection -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Output Format</label>
                        <select id="formatSelect" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="jpeg">JPEG</option>
                            <option value="png">PNG</option>
                            <option value="webp">WebP</option>
                            <option value="original">Original Format</option>
                        </select>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex space-x-3">
                        <button onclick="resizeImage()" class="flex-1 btn-primary text-white px-6 py-3 rounded-lg font-medium">
                            <i class="fas fa-magic mr-2"></i>Resize Image
                        </button>
                        <button onclick="resetAll()" class="px-6 py-3 bg-gray-200 hover:bg-gray-300 rounded-lg font-medium transition">
                            <i class="fas fa-redo mr-2"></i>Reset
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Preview Section -->
            <div id="previewSection" class="mt-8 hidden">
                <div class="glass-effect rounded-2xl p-6 shadow-xl">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-800">
                        <i class="fas fa-eye mr-2 text-purple-600"></i>Preview & Compare
                    </h2>
                    
                    <div class="grid lg:grid-cols-2 gap-6">
                        <!-- Original Image -->
                        <div>
                            <h3 class="text-lg font-medium text-gray-700 mb-3">Original</h3>
                            <div class="relative bg-gray-100 rounded-lg overflow-hidden">
                                <img id="originalPreview" class="w-full h-auto">
                                <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm">
                                    <span id="originalSize"></span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Resized Image -->
                        <div>
                            <h3 class="text-lg font-medium text-gray-700 mb-3">Resized</h3>
                            <div class="relative bg-gray-100 rounded-lg overflow-hidden">
                                <img id="resizedPreview" class="w-full h-auto">
                                <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm">
                                    <span id="resizedSize"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Download Button -->
                    <div class="mt-6 flex justify-center">
                        <button onclick="downloadImage()" class="btn-primary text-white px-8 py-3 rounded-lg font-medium">
                            <i class="fas fa-download mr-2"></i>Download Resized Image
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Editor Section -->
        <section id="editor-section" class="mb-12 hidden">
            <div class="glass-effect rounded-2xl p-6 shadow-xl">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">
                    <i class="fas fa-edit mr-2 text-purple-600"></i>Advanced Image Editor
                </h2>
                
                <!-- Upload for Editor -->
                <div class="mb-6">
                    <div id="editorDropZone" class="drop-zone rounded-xl p-8 text-center cursor-pointer hover:bg-gray-50 transition">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                        <p class="text-gray-600 mb-2">Upload image to edit</p>
                        <label for="editorFileInput" class="btn-primary text-white px-4 py-2 rounded-lg inline-block cursor-pointer text-sm">
                            Browse Files
                        </label>
                        <input type="file" id="editorFileInput" class="hidden" accept="image/*">
                    </div>
                </div>
                
                <!-- Editor Tabs -->
                <div id="editorTabs" class="flex space-x-2 mb-6 border-b hidden">
                    <button onclick="showEditorTab('crop')" id="crop-tab" class="px-4 py-2 font-medium text-gray-600 hover:text-purple-600 transition tab-active">
                        <i class="fas fa-crop mr-2"></i>Crop
                    </button>
                    <button onclick="showEditorTab('rotate')" id="rotate-tab" class="px-4 py-2 font-medium text-gray-600 hover:text-purple-600 transition">
                        <i class="fas fa-sync-alt mr-2"></i>Rotate & Flip
                    </button>
                    <button onclick="showEditorTab('watermark')" id="watermark-tab" class="px-4 py-2 font-medium text-gray-600 hover:text-purple-600 transition">
                        <i class="fas fa-stamp mr-2"></i>Watermark
                    </button>
                </div>
                
                <!-- Crop Tab -->
                <div id="crop-panel" class="editor-panel">
                    <div class="grid lg:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-medium text-gray-700 mb-3">Crop Settings</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Aspect Ratio</label>
                                    <select id="cropRatio" onchange="updateCropRatio()" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                        <option value="free">Free</option>
                                        <option value="1:1">1:1 (Square)</option>
                                        <option value="16:9">16:9 (Widescreen)</option>
                                        <option value="4:3">4:3</option>
                                        <option value="3:2">3:2</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Custom Size</label>
                                    <div class="flex space-x-2">
                                        <input type="number" id="cropWidth" placeholder="Width" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg">
                                        <input type="number" id="cropHeight" placeholder="Height" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg">
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="applyCrop()" class="flex-1 btn-primary text-white px-4 py-2 rounded-lg">
                                        <i class="fas fa-check mr-2"></i>Apply Crop
                                    </button>
                                    <button onclick="resetCrop()" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition">
                                        <i class="fas fa-times mr-2"></i>Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="bg-gray-100 rounded-lg p-4">
                                <div id="cropContainer" class="crop-container relative">
                                    <img id="cropImage" class="max-w-full">
                                    <div id="cropBox" class="crop-box hidden"></div>
                                </div>
                                <p class="text-sm text-gray-500 mt-2">Click and drag to select crop area</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Rotate Tab -->
                <div id="rotate-panel" class="editor-panel hidden">
                    <div class="grid lg:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-medium text-gray-700 mb-3">Rotation Settings</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Rotation Angle: <span id="rotateValue" class="text-purple-600 font-semibold">0°</span>
                                    </label>
                                    <input type="range" id="rotateSlider" min="-180" max="180" value="0" class="slider w-full" oninput="updateRotation()">
                                </div>
                                <div class="grid grid-cols-2 gap-2">
                                    <button onclick="rotateImage(-90)" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition">
                                        <i class="fas fa-undo mr-2"></i>Rotate Left
                                    </button>
                                    <button onclick="rotateImage(90)" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition">
                                        <i class="fas fa-redo mr-2"></i>Rotate Right
                                    </button>
                                    <button onclick="flipImage('horizontal')" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition">
                                        <i class="fas fa-arrows-alt-h mr-2"></i>Flip H
                                    </button>
                                    <button onclick="flipImage('vertical')" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition">
                                        <i class="fas fa-arrows-alt-v mr-2"></i>Flip V
                                    </button>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="applyRotation()" class="flex-1 btn-primary text-white px-4 py-2 rounded-lg">
                                        <i class="fas fa-check mr-2"></i>Apply Changes
                                    </button>
                                    <button onclick="resetRotation()" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition">
                                        <i class="fas fa-times mr-2"></i>Reset
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="bg-gray-100 rounded-lg p-4">
                                <canvas id="rotateCanvas" class="max-w-full mx-auto"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Watermark Tab -->
                <div id="watermark-panel" class="editor-panel hidden">
                    <div class="grid lg:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-medium text-gray-700 mb-3">Watermark Settings</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Watermark Type</label>
                                    <select id="watermarkType" onchange="toggleWatermarkType()" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                        <option value="text">Text Watermark</option>
                                        <option value="image">Image Watermark</option>
                                    </select>
                                </div>
                                
                                <div id="textWatermarkOptions">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Watermark Text</label>
                                        <input type="text" id="watermarkText" placeholder="Enter watermark text" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                    </div>
                                    <div class="grid grid-cols-2 gap-2 mt-2">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Font Size</label>
                                            <input type="number" id="watermarkSize" value="24" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Color</label>
                                            <input type="color" id="watermarkColor" value="#ffffff" class="w-full h-10 border border-gray-300 rounded-lg">
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="imageWatermarkOptions" class="hidden">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Watermark Image</label>
                                    <input type="file" id="watermarkImageFile" accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Position</label>
                                    <div class="grid grid-cols-3 gap-2">
                                        <button onclick="setWatermarkPosition('top-left')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Top Left</button>
                                        <button onclick="setWatermarkPosition('top-center')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Top Center</button>
                                        <button onclick="setWatermarkPosition('top-right')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Top Right</button>
                                        <button onclick="setWatermarkPosition('center-left')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Center Left</button>
                                        <button onclick="setWatermarkPosition('center')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Center</button>
                                        <button onclick="setWatermarkPosition('center-right')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Center Right</button>
                                        <button onclick="setWatermarkPosition('bottom-left')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Bottom Left</button>
                                        <button onclick="setWatermarkPosition('bottom-center')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Bottom Center</button>
                                        <button onclick="setWatermarkPosition('bottom-right')" class="px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded text-xs">Bottom Right</button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Opacity: <span id="watermarkOpacityValue" class="text-purple-600 font-semibold">70%</span>
                                    </label>
                                    <input type="range" id="watermarkOpacity" min="0" max="100" value="70" class="slider w-full" oninput="updateWatermarkOpacity()">
                                </div>
                                
                                <div class="flex space-x-2">
                                    <button onclick="applyWatermark()" class="flex-1 btn-primary text-white px-4 py-2 rounded-lg">
                                        <i class="fas fa-check mr-2"></i>Apply Watermark
                                    </button>
                                    <button onclick="resetWatermark()" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition">
                                        <i class="fas fa-times mr-2"></i>Clear
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="bg-gray-100 rounded-lg p-4">
                                <canvas id="watermarkCanvas" class="max-w-full mx-auto"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Batch Processing Section -->
        <section id="batch-section" class="mb-12 hidden">
            <div class="glass-effect rounded-2xl p-6 shadow-xl">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">
                    <i class="fas fa-layer-group mr-2 text-purple-600"></i>Batch Processing & Export
                </h2>
                
                <div class="mb-6">
                    <div id="batchDropZone" class="drop-zone rounded-xl p-12 text-center cursor-pointer hover:bg-gray-50 transition">
                        <i class="fas fa-images text-6xl text-gray-400 mb-4"></i>
                        <p class="text-gray-600 mb-2">Drag & drop multiple images here</p>
                        <p class="text-sm text-gray-500 mb-4">or</p>
                        <label for="batchFileInput" class="btn-primary text-white px-6 py-3 rounded-lg inline-block cursor-pointer">
                            Select Multiple Files
                        </label>
                        <input type="file" id="batchFileInput" class="hidden" accept="image/*" multiple>
                    </div>
                </div>
                
                <!-- Batch Settings -->
                <div id="batchSettings" class="hidden mb-6">
                    <h3 class="text-lg font-medium text-gray-700 mb-3">Batch Settings</h3>
                    <div class="grid md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Width (px)</label>
                            <input type="number" id="batchWidth" placeholder="Width" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Height (px)</label>
                            <input type="number" id="batchHeight" placeholder="Height" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Quality</label>
                            <select id="batchQuality" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="100">High (100%)</option>
                                <option value="90" selected>Medium (90%)</option>
                                <option value="70">Low (70%)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Format</label>
                            <select id="batchFormat" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="jpeg">JPEG</option>
                                <option value="png">PNG</option>
                                <option value="webp">WebP</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-4 space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="batchWatermark" class="mr-2">
                            <span class="text-sm text-gray-700">Add watermark to all images</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="batchMaintainAspect" checked class="mr-2">
                            <span class="text-sm text-gray-700">Maintain aspect ratio</span>
                        </label>
                    </div>
                </div>
                
                <!-- Batch List -->
                <div id="batchList" class="hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium text-gray-700">Images to Process (<span id="batchCount">0</span>)</h3>
                        <button onclick="processBatch()" class="btn-primary text-white px-6 py-2 rounded-lg">
                            <i class="fas fa-play mr-2"></i>Process All
                        </button>
                    </div>
                    <div id="batchItems" class="space-y-2 max-h-96 overflow-y-auto"></div>
                </div>
                
                <!-- Batch Results -->
                <div id="batchResults" class="mt-6 hidden">
                    <h3 class="text-lg font-medium text-gray-700 mb-4">Processing Results</h3>
                    <div id="batchResultItems" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                    <div class="mt-6 flex justify-center space-x-4">
                        <button onclick="downloadAllBatch()" class="btn-primary text-white px-8 py-3 rounded-lg">
                            <i class="fas fa-file-archive mr-2"></i>Download All as ZIP
                        </button>
                        <button onclick="clearBatchResults()" class="px-8 py-3 bg-gray-200 hover:bg-gray-300 rounded-lg transition">
                            <i class="fas fa-trash mr-2"></i>Clear Results
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Converter Section -->
        <section id="converter-section" class="mb-12 hidden">
            <div class="glass-effect rounded-2xl p-6 shadow-xl">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">
                    <i class="fas fa-exchange-alt mr-2 text-purple-600"></i>Format Converter
                </h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-medium text-gray-700 mb-3">Input Format</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span>JPEG</span>
                                <span class="text-sm text-gray-500">Best for photos</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span>PNG</span>
                                <span class="text-sm text-gray-500">Supports transparency</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span>WebP</span>
                                <span class="text-sm text-gray-500">Modern format, smaller size</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <span>GIF</span>
                                <span class="text-sm text-gray-500">Animated images</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-medium text-gray-700 mb-3">Convert To</h3>
                        <div class="space-y-3">
                            <label class="flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-purple-50 transition">
                                <div class="flex items-center">
                                    <input type="radio" name="convertFormat" value="jpeg" class="mr-3">
                                    <span>JPEG</span>
                                </div>
                                <span class="text-sm text-gray-500">Lossy compression</span>
                            </label>
                            <label class="flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-purple-50 transition">
                                <div class="flex items-center">
                                    <input type="radio" name="convertFormat" value="png" class="mr-3">
                                    <span>PNG</span>
                                </div>
                                <span class="text-sm text-gray-500">Lossless compression</span>
                            </label>
                            <label class="flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-purple-50 transition">
                                <div class="flex items-center">
                                    <input type="radio" name="convertFormat" value="webp" class="mr-3">
                                    <span>WebP</span>
                                </div>
                                <span class="text-sm text-gray-500">25-35% smaller</span>
                            </label>
                            <label class="flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-purple-50 transition">
                                <div class="flex items-center">
                                    <input type="radio" name="convertFormat" value="gif" class="mr-3">
                                    <span>GIF</span>
                                </div>
                                <span class="text-sm text-gray-500">256 colors max</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6">
                    <label for="convertFileInput" class="btn-primary text-white px-6 py-3 rounded-lg inline-block cursor-pointer">
                        <i class="fas fa-file-upload mr-2"></i>Select Image to Convert
                    </label>
                    <input type="file" id="convertFileInput" class="hidden" accept="image/*">
                </div>
                
                <div id="convertPreview" class="mt-6 hidden">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-gray-700 mb-2">Original</h4>
                            <img id="convertOriginal" class="w-full rounded-lg">
                        </div>
                        <div>
                            <h4 class="font-medium text-gray-700 mb-2">Converted</h4>
                            <img id="convertResult" class="w-full rounded-lg">
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <button onclick="downloadConverted()" class="btn-primary text-white px-6 py-3 rounded-lg">
                            <i class="fas fa-download mr-2"></i>Download Converted Image
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <div class="flex items-center space-x-3 mb-2">
                        <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                            <i class="fas fa-image text-xl text-purple-600"></i>
                        </div>
                        <span class="text-xl font-semibold">ImageResizer Pro</span>
                    </div>
                    <p class="text-gray-400 text-sm">Professional image processing made simple</p>
                </div>
                
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-400 hover:text-white transition">
                        <i class="fab fa-twitter text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition">
                        <i class="fab fa-facebook text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition">
                        <i class="fab fa-linkedin text-xl"></i>
                    </a>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-6 pt-6 text-center text-gray-400 text-sm">
                <p>&copy; 2024 ImageResizer Pro. All rights reserved. | Built with HTML5, CSS3 & JavaScript</p>
            </div>
        </div>
    </footer>
    
    <!-- Toast Notification -->
    <div id="toast" class="toast glass-effect rounded-lg shadow-xl p-4 min-w-[300px]">
        <div class="flex items-center">
            <i id="toastIcon" class="fas fa-check-circle text-green-500 text-xl mr-3"></i>
            <div>
                <p id="toastTitle" class="font-semibold text-gray-800">Success!</p>
                <p id="toastMessage" class="text-sm text-gray-600">Operation completed successfully</p>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables
        let currentImage = null;
        let resizedImageData = null;
        let batchImages = [];
        let originalAspectRatio = 1;
        let currentRotation = 0;
        let watermarkPosition = 'bottom-right';
        let cropData = null;
        let isDragging = false;
        let dragStartX = 0;
        let dragStartY = 0;
        let editorImage = null;
        let maintainAspectRatio = false;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            showSection('resizer');
        });
        
        // Setup event listeners
        function setupEventListeners() {
            // File input
            document.getElementById('fileInput').addEventListener('change', handleFileSelect);
            document.getElementById('editorFileInput').addEventListener('change', handleEditorFileSelect);
            document.getElementById('batchFileInput').addEventListener('change', handleBatchFileSelect);
            document.getElementById('convertFileInput').addEventListener('change', handleConvertFileSelect);
            document.getElementById('watermarkImageFile').addEventListener('change', handleWatermarkImageSelect);
            
            // Drag and drop
            const dropZone = document.getElementById('dropZone');
            const editorDropZone = document.getElementById('editorDropZone');
            const batchDropZone = document.getElementById('batchDropZone');
            
            dropZone.addEventListener('dragover', handleDragOver);
            dropZone.addEventListener('dragleave', handleDragLeave);
            dropZone.addEventListener('drop', handleDrop);
            
            editorDropZone.addEventListener('dragover', handleDragOver);
            editorDropZone.addEventListener('dragleave', handleDragLeave);
            editorDropZone.addEventListener('drop', handleEditorDrop);
            
            batchDropZone.addEventListener('dragover', handleDragOver);
            batchDropZone.addEventListener('dragleave', handleDragLeave);
            batchDropZone.addEventListener('drop', handleBatchDrop);
            
            // Sliders
            document.getElementById('percentageSlider').addEventListener('input', updatePercentage);
            document.getElementById('qualitySlider').addEventListener('input', updateQuality);
            
            // FIXED: Height/Width input handling
            const widthInput = document.getElementById('widthInput');
            const heightInput = document.getElementById('heightInput');
            const maintainAspectCheckbox = document.getElementById('maintainAspect');
            
            // Update maintainAspectRatio when checkbox changes
            maintainAspectCheckbox.addEventListener('change', function() {
                maintainAspectRatio = this.checked;
            });
            
            // Handle width input
            widthInput.addEventListener('input', function() {
                if (maintainAspectRatio && currentImage) {
                    const width = parseInt(this.value);
                    if (width && width > 0) {
                        const newHeight = Math.round(width / originalAspectRatio);
                        heightInput.value = newHeight;
                    }
                }
            });
            
            // Handle height input
            heightInput.addEventListener('input', function() {
                if (maintainAspectRatio && currentImage) {
                    const height = parseInt(this.value);
                    if (height && height > 0) {
                        const newWidth = Math.round(height * originalAspectRatio);
                        widthInput.value = newWidth;
                    }
                }
            });
        }
        
        // Show section
        function showSection(section) {
            const sections = ['resizer', 'editor', 'converter', 'batch'];
            sections.forEach(s => {
                const element = document.getElementById(`${s}-section`);
                if (element) {
                    element.classList.toggle('hidden', s !== section);
                }
            });
            
            // Update nav active state
            document.querySelectorAll('[id^="nav-"]').forEach(btn => {
                btn.classList.remove('nav-active');
            });
            document.getElementById(`nav-${section}`).classList.add('nav-active');
        }
        
        // Show editor tab
        function showEditorTab(tab) {
            // Update tab buttons
            document.querySelectorAll('[id$="-tab"]').forEach(btn => {
                btn.classList.remove('tab-active');
            });
            document.getElementById(`${tab}-tab`).classList.add('tab-active');
            
            // Update panels
            document.querySelectorAll('.editor-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            document.getElementById(`${tab}-panel`).classList.remove('hidden');
            
            // Initialize specific tab
            if (tab === 'crop' && editorImage) {
                initCropTab();
            } else if (tab === 'rotate' && editorImage) {
                initRotateTab();
            } else if (tab === 'watermark' && editorImage) {
                initWatermarkTab();
            }
        }
        
        // File handling
        function handleFileSelect(e) {
            const files = e.target.files;
            if (files.length > 0) {
                loadImage(files[0]);
            }
        }
        
        function handleEditorFileSelect(e) {
            const files = e.target.files;
            if (files.length > 0) {
                loadEditorImage(files[0]);
            }
        }
        
        function handleBatchFileSelect(e) {
            const files = Array.from(e.target.files);
            processBatchFiles(files);
        }
        
        function handleConvertFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                convertImageFormat(file);
            }
        }
        
        function handleWatermarkImageSelect(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    window.watermarkImageData = event.target.result;
                    showToast('Success', 'Watermark image loaded', 'success');
                };
                reader.readAsDataURL(file);
            }
        }
        
        // Drag and drop handlers
        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }
        
        function handleDragLeave(e) {
            e.currentTarget.classList.remove('dragover');
        }
        
        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                loadImage(files[0]);
            }
        }
        
        function handleEditorDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                loadEditorImage(files[0]);
            }
        }
        
        function handleBatchDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const files = Array.from(e.dataTransfer.files);
            processBatchFiles(files);
        }
        
        // Load image
        function loadImage(file) {
            if (!file.type.startsWith('image/')) {
                showToast('Error', 'Please select a valid image file', 'error');
                return;
            }
            
            if (file.size > 10 * 1024 * 1024) {
                showToast('Error', 'File size must be less than 10MB', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    currentImage = img;
                    originalAspectRatio = img.width / img.height;
                    
                    // Update image info
                    document.getElementById('imageName').textContent = file.name;
                    document.getElementById('imageSize').textContent = formatFileSize(file.size);
                    document.getElementById('imageDimensions').textContent = `${img.width} × ${img.height}px`;
                    document.getElementById('imageType').textContent = file.type;
                    document.getElementById('imageInfo').classList.remove('hidden');
                    
                    // Set initial dimensions
                    document.getElementById('widthInput').value = img.width;
                    document.getElementById('heightInput').value = img.height;
                    
                    // Show preview
                    document.getElementById('originalPreview').src = e.target.result;
                    document.getElementById('originalSize').textContent = `${img.width} × ${img.height}`;
                    
                    showToast('Success', 'Image loaded successfully', 'success');
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
        
        // Load editor image
        function loadEditorImage(file) {
            if (!file.type.startsWith('image/')) {
                showToast('Error', 'Please select a valid image file', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    editorImage = img;
                    
                    // Show editor tabs
                    document.getElementById('editorTabs').classList.remove('hidden');
                    
                    // Initialize first tab
                    showEditorTab('crop');
                    
                    showToast('Success', 'Image loaded for editing', 'success');
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
        
        // Social media presets
        function setSocialPreset(preset) {
            const presets = {
                'instagram': { width: 1080, height: 1080 },
                'instagram-story': { width: 1080, height: 1920 },
                'facebook': { width: 1200, height: 630 },
                'twitter': { width: 1500, height: 500 },
                'youtube': { width: 1280, height: 720 },
                'linkedin': { width: 1584, height: 396 }
            };
            
            const size = presets[preset];
            if (size) {
                document.getElementById('widthInput').value = size.width;
                document.getElementById('heightInput').value = size.height;
                originalAspectRatio = size.width / size.height;
                
                showToast('Success', `Applied ${preset.replace('-', ' ')} preset`, 'success');
            }
        }
        
        // Standard presets
        function setPresetSize(width, height) {
            document.getElementById('widthInput').value = width;
            document.getElementById('heightInput').value = height;
            
            if (maintainAspectRatio) {
                originalAspectRatio = width / height;
            }
        }
        
        // Update functions
        function updatePercentage() {
            const percentage = document.getElementById('percentageSlider').value;
            document.getElementById('percentageValue').textContent = `${percentage}%`;
            
            if (currentImage) {
                const newWidth = Math.round(currentImage.width * (percentage / 100));
                const newHeight = Math.round(currentImage.height * (percentage / 100));
                
                document.getElementById('widthInput').value = newWidth;
                document.getElementById('heightInput').value = newHeight;
            }
        }
        
        function updateQuality() {
            const quality = document.getElementById('qualitySlider').value;
            document.getElementById('qualityValue').textContent = `${quality}%`;
        }
        
        function updateRotation() {
            const rotation = document.getElementById('rotateSlider').value;
            document.getElementById('rotateValue').textContent = `${rotation}°`;
            currentRotation = parseInt(rotation);
            
            if (editorImage) {
                drawRotatedImage();
            }
        }
        
        function updateWatermarkOpacity() {
            const opacity = document.getElementById('watermarkOpacity').value;
            document.getElementById('watermarkOpacityValue').textContent = `${opacity}%`;
        }
        
        // Resize image
        function resizeImage() {
            if (!currentImage) {
                showToast('Error', 'Please upload an image first', 'error');
                return;
            }
            
            const width = parseInt(document.getElementById('widthInput').value) || currentImage.width;
            const height = parseInt(document.getElementById('heightInput').value) || currentImage.height;
            const quality = parseInt(document.getElementById('qualitySlider').value) / 100;
            const format = document.getElementById('formatSelect').value;
            
            const canvas = document.createElement('canvas');
            canvas.width = width;
            canvas.height = height;
            
            const ctx = canvas.getContext('2d');
            ctx.drawImage(currentImage, 0, 0, width, height);
            
            // Convert to desired format
            let mimeType = 'image/jpeg';
            if (format === 'png') mimeType = 'image/png';
            else if (format === 'webp') mimeType = 'image/webp';
            else if (format === 'original' && currentImage.src.startsWith('data:')) {
                mimeType = currentImage.src.split(':')[1].split(';')[0];
            }
            
            resizedImageData = canvas.toDataURL(mimeType, quality);
            
            // Show preview
            document.getElementById('resizedPreview').src = resizedImageData;
            document.getElementById('resizedSize').textContent = `${width} × ${height}`;
            document.getElementById('previewSection').classList.remove('hidden');
            
            showToast('Success', 'Image resized successfully', 'success');
        }
        
        // Crop functionality
        function initCropTab() {
            const cropImage = document.getElementById('cropImage');
            const cropContainer = document.getElementById('cropContainer');
            
            cropImage.src = editorImage.src;
            
            // Initialize crop box
            const cropBox = document.getElementById('cropBox');
            cropBox.style.width = '200px';
            cropBox.style.height = '200px';
            cropBox.style.left = '50px';
            cropBox.style.top = '50px';
            cropBox.classList.remove('hidden');
            
            // Add mouse events for cropping
            cropContainer.addEventListener('mousedown', startCrop);
            document.addEventListener('mousemove', doCrop);
            document.addEventListener('mouseup', endCrop);
        }
        
        function startCrop(e) {
            isDragging = true;
            const cropBox = document.getElementById('cropBox');
            const rect = cropBox.getBoundingClientRect();
            dragStartX = e.clientX - rect.left;
            dragStartY = e.clientY - rect.top;
        }
        
        function doCrop(e) {
            if (!isDragging) return;
            
            const cropContainer = document.getElementById('cropContainer');
            const cropBox = document.getElementById('cropBox');
            const containerRect = cropContainer.getBoundingClientRect();
            
            let newX = e.clientX - containerRect.left - dragStartX;
            let newY = e.clientY - containerRect.top - dragStartY;
            
            // Boundary checks
            newX = Math.max(0, Math.min(newX, containerRect.width - cropBox.offsetWidth));
            newY = Math.max(0, Math.min(newY, containerRect.height - cropBox.offsetHeight));
            
            cropBox.style.left = newX + 'px';
            cropBox.style.top = newY + 'px';
        }
        
        function endCrop() {
            isDragging = false;
        }
        
        function updateCropRatio() {
            const ratio = document.getElementById('cropRatio').value;
            const cropBox = document.getElementById('cropBox');
            
            if (ratio !== 'free') {
                const [w, h] = ratio.split(':').map(Number);
                const aspectRatio = w / h;
                
                const currentWidth = parseInt(cropBox.style.width);
                cropBox.style.height = (currentWidth / aspectRatio) + 'px';
            }
        }
        
        function applyCrop() {
            if (!editorImage) return;
            
            const cropBox = document.getElementById('cropBox');
            const cropImage = document.getElementById('cropImage');
            
            const scaleX = editorImage.width / cropImage.width;
            const scaleY = editorImage.height / cropImage.height;
            
            const cropX = parseInt(cropBox.style.left) * scaleX;
            const cropY = parseInt(cropBox.style.top) * scaleY;
            const cropWidth = parseInt(cropBox.style.width) * scaleX;
            const cropHeight = parseInt(cropBox.style.height) * scaleY;
            
            const canvas = document.createElement('canvas');
            canvas.width = cropWidth;
            canvas.height = cropHeight;
            
            const ctx = canvas.getContext('2d');
            ctx.drawImage(editorImage, cropX, cropY, cropWidth, cropHeight, 0, 0, cropWidth, cropHeight);
            
            // Update editor image with cropped version
            const croppedImage = new Image();
            croppedImage.onload = function() {
                editorImage = croppedImage;
                showToast('Success', 'Image cropped successfully', 'success');
                initCropTab(); // Reinitialize with cropped image
            };
            croppedImage.src = canvas.toDataURL();
        }
        
        function resetCrop() {
            initCropTab();
        }
        
        // Rotate functionality
        function initRotateTab() {
            drawRotatedImage();
        }
        
        function drawRotatedImage() {
            const canvas = document.getElementById('rotateCanvas');
            const ctx = canvas.getContext('2d');
            
            const radians = (currentRotation * Math.PI) / 180;
            
            if (Math.abs(currentRotation) === 90 || Math.abs(currentRotation) === 270) {
                canvas.width = editorImage.height;
                canvas.height = editorImage.width;
            } else {
                canvas.width = editorImage.width;
                canvas.height = editorImage.height;
            }
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.save();
            ctx.translate(canvas.width / 2, canvas.height / 2);
            ctx.rotate(radians);
            ctx.drawImage(editorImage, -editorImage.width / 2, -editorImage.height / 2);
            ctx.restore();
        }
        
        function rotateImage(degrees) {
            currentRotation = (currentRotation + degrees) % 360;
            document.getElementById('rotateSlider').value = currentRotation;
            document.getElementById('rotateValue').textContent = `${currentRotation}°`;
            drawRotatedImage();
        }
        
        function flipImage(direction) {
            const canvas = document.getElementById('rotateCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.save();
            if (direction === 'horizontal') {
                ctx.scale(-1, 1);
                ctx.drawImage(canvas, -canvas.width, 0);
            } else {
                ctx.scale(1, -1);
                ctx.drawImage(canvas, 0, -canvas.height);
            }
            ctx.restore();
            
            // Update editor image
            const flippedImage = new Image();
            flippedImage.onload = function() {
                editorImage = flippedImage;
                drawRotatedImage();
            };
            flippedImage.src = canvas.toDataURL();
        }
        
        function applyRotation() {
            const canvas = document.getElementById('rotateCanvas');
            const rotatedImage = new Image();
            rotatedImage.onload = function() {
                editorImage = rotatedImage;
                showToast('Success', 'Rotation applied successfully', 'success');
                initRotateTab();
            };
            rotatedImage.src = canvas.toDataURL();
        }
        
        function resetRotation() {
            currentRotation = 0;
            document.getElementById('rotateSlider').value = 0;
            document.getElementById('rotateValue').textContent = '0°';
            drawRotatedImage();
        }
        
        // Watermark functionality
        function initWatermarkTab() {
            drawWatermarkPreview();
        }
        
        function toggleWatermarkType() {
            const type = document.getElementById('watermarkType').value;
            document.getElementById('textWatermarkOptions').classList.toggle('hidden', type !== 'text');
            document.getElementById('imageWatermarkOptions').classList.toggle('hidden', type !== 'image');
        }
        
        function setWatermarkPosition(position) {
            watermarkPosition = position;
            if (editorImage) {
                drawWatermarkPreview();
            }
        }
        
        function drawWatermarkPreview() {
            const canvas = document.getElementById('watermarkCanvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = editorImage.width;
            canvas.height = editorImage.height;
            ctx.drawImage(editorImage, 0, 0);
            
            const type = document.getElementById('watermarkType').value;
            const opacity = document.getElementById('watermarkOpacity').value / 100;
            
            ctx.globalAlpha = opacity;
            
            if (type === 'text') {
                const text = document.getElementById('watermarkText').value || 'Watermark';
                const fontSize = parseInt(document.getElementById('watermarkSize').value) || 24;
                const color = document.getElementById('watermarkColor').value;
                
                ctx.font = `bold ${fontSize}px Arial`;
                ctx.fillStyle = color;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                const positions = {
                    'top-left': [fontSize, fontSize],
                    'top-center': [canvas.width / 2, fontSize],
                    'top-right': [canvas.width - fontSize, fontSize],
                    'center-left': [fontSize, canvas.height / 2],
                    'center': [canvas.width / 2, canvas.height / 2],
                    'center-right': [canvas.width - fontSize, canvas.height / 2],
                    'bottom-left': [fontSize, canvas.height - fontSize],
                    'bottom-center': [canvas.width / 2, canvas.height - fontSize],
                    'bottom-right': [canvas.width - fontSize, canvas.height - fontSize]
                };
                
                const [x, y] = positions[watermarkPosition];
                ctx.fillText(text, x, y);
            } else if (type === 'image' && window.watermarkImageData) {
                const watermarkImg = new Image();
                watermarkImg.onload = function() {
                    const maxSize = 100;
                    let width = watermarkImg.width;
                    let height = watermarkImg.height;
                    
                    if (width > maxSize || height > maxSize) {
                        const ratio = Math.min(maxSize / width, maxSize / height);
                        width *= ratio;
                        height *= ratio;
                    }
                    
                    const positions = {
                        'top-left': [10, 10],
                        'top-center': [(canvas.width - width) / 2, 10],
                        'top-right': [canvas.width - width - 10, 10],
                        'center-left': [10, (canvas.height - height) / 2],
                        'center': [(canvas.width - width) / 2, (canvas.height - height) / 2],
                        'center-right': [canvas.width - width - 10, (canvas.height - height) / 2],
                        'bottom-left': [10, canvas.height - height - 10],
                        'bottom-center': [(canvas.width - width) / 2, canvas.height - height - 10],
                        'bottom-right': [canvas.width - width - 10, canvas.height - height - 10]
                    };
                    
                    const [x, y] = positions[watermarkPosition];
                    ctx.drawImage(watermarkImg, x, y, width, height);
                };
                watermarkImg.src = window.watermarkImageData;
            }
            
            ctx.globalAlpha = 1;
        }
        
        function applyWatermark() {
            const canvas = document.getElementById('watermarkCanvas');
            const watermarkedImage = new Image();
            watermarkedImage.onload = function() {
                editorImage = watermarkedImage;
                showToast('Success', 'Watermark applied successfully', 'success');
                initWatermarkTab();
            };
            watermarkedImage.src = canvas.toDataURL();
        }
        
        function resetWatermark() {
            document.getElementById('watermarkText').value = '';
            document.getElementById('watermarkSize').value = 24;
            document.getElementById('watermarkColor').value = '#ffffff';
            document.getElementById('watermarkOpacity').value = 70;
            document.getElementById('watermarkOpacityValue').textContent = '70%';
            drawWatermarkPreview();
        }
        
        // Batch processing
        function processBatchFiles(files) {
            batchImages = files.filter(file => file.type.startsWith('image/'));
            
            if (batchImages.length === 0) {
                showToast('Error', 'No valid images found', 'error');
                return;
            }
            
            const batchList = document.getElementById('batchList');
            const batchItems = document.getElementById('batchItems');
            const batchSettings = document.getElementById('batchSettings');
            
            batchItems.innerHTML = '';
            batchImages.forEach((file, index) => {
                const item = document.createElement('div');
                item.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
                item.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas fa-image text-purple-600 mr-3"></i>
                        <div>
                            <p class="font-medium text-gray-700">${file.name}</p>
                            <p class="text-sm text-gray-500">${formatFileSize(file.size)}</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-gray-500">Status:</span>
                        <span class="batch-status text-sm font-medium text-yellow-600" data-index="${index}">Pending</span>
                    </div>
                `;
                batchItems.appendChild(item);
            });
            
            document.getElementById('batchCount').textContent = batchImages.length;
            batchList.classList.remove('hidden');
            batchSettings.classList.remove('hidden');
            
            showToast('Success', `${batchImages.length} images loaded`, 'success');
        }
        
        async function processBatch() {
            const width = parseInt(document.getElementById('batchWidth').value) || 800;
            const height = parseInt(document.getElementById('batchHeight').value) || 600;
            const quality = parseInt(document.getElementById('batchQuality').value) / 100;
            const addWatermark = document.getElementById('batchWatermark').checked;
            const maintainAspect = document.getElementById('batchMaintainAspect').checked;
            const format = document.getElementById('batchFormat').value;
            
            const results = [];
            
            for (let i = 0; i < batchImages.length; i++) {
                const file = batchImages[i];
                const statusElement = document.querySelector(`.batch-status[data-index="${i}"]`);
                
                statusElement.textContent = 'Processing...';
                statusElement.className = 'batch-status text-sm font-medium text-blue-600';
                
                const result = await processSingleImage(file, width, height, quality, format, addWatermark, maintainAspect);
                results.push(result);
                
                statusElement.textContent = 'Complete';
                statusElement.className = 'batch-status text-sm font-medium text-green-600';
            }
            
            displayBatchResults(results);
        }
        
        function processSingleImage(file, width, height, quality, format, addWatermark, maintainAspect) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        let finalWidth = width;
                        let finalHeight = height;
                        
                        if (maintainAspect) {
                            const aspectRatio = img.width / img.height;
                            if (width / height > aspectRatio) {
                                finalWidth = Math.round(height * aspectRatio);
                            } else {
                                finalHeight = Math.round(width / aspectRatio);
                            }
                        }
                        
                        const canvas = document.createElement('canvas');
                        canvas.width = finalWidth;
                        canvas.height = finalHeight;
                        
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, finalWidth, finalHeight);
                        
                        // Add watermark if enabled
                        if (addWatermark) {
                            ctx.globalAlpha = 0.7;
                            ctx.font = 'bold 24px Arial';
                            ctx.fillStyle = 'white';
                            ctx.textAlign = 'right';
                            ctx.fillText('© Your Brand', finalWidth - 10, finalHeight - 10);
                            ctx.globalAlpha = 1;
                        }
                        
                        let mimeType = 'image/jpeg';
                        if (format === 'png') mimeType = 'image/png';
                        else if (format === 'webp') mimeType = 'image/webp';
                        
                        const dataUrl = canvas.toDataURL(mimeType, quality);
                        resolve({
                            name: file.name,
                            originalSize: formatFileSize(file.size),
                            dataUrl: dataUrl,
                            dimensions: `${finalWidth} × ${finalHeight}`
                        });
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            });
        }
        
        function displayBatchResults(results) {
            const batchResults = document.getElementById('batchResults');
            const batchResultItems = document.getElementById('batchResultItems');
            
            batchResultItems.innerHTML = '';
            results.forEach(result => {
                const item = document.createElement('div');
                item.className = 'bg-gray-50 rounded-lg p-4';
                item.innerHTML = `
                    <img src="${result.dataUrl}" class="w-full h-32 object-cover rounded mb-2">
                    <p class="font-medium text-gray-700 text-sm truncate">${result.name}</p>
                    <p class="text-xs text-gray-500">${result.dimensions}</p>
                    <button onclick="downloadSingleBatchImage('${result.dataUrl}', '${result.name}')" class="mt-2 text-purple-600 hover:text-purple-700 text-sm">
                        <i class="fas fa-download mr-1"></i>Download
                    </button>
                `;
                batchResultItems.appendChild(item);
            });
            
            batchResults.classList.remove('hidden');
            showToast('Success', 'Batch processing completed', 'success');
        }
        
        // Download functions
        function downloadImage() {
            if (!resizedImageData) {
                showToast('Error', 'No resized image to download', 'error');
                return;
            }
            
            const link = document.createElement('a');
            link.download = 'resized-image.jpg';
            link.href = resizedImageData;
            link.click();
            
            showToast('Success', 'Image downloaded', 'success');
        }
        
        function downloadConverted() {
            const convertedImg = document.getElementById('convertResult').src;
            if (!convertedImg) {
                showToast('Error', 'No converted image to download', 'error');
                return;
            }
            
            const link = document.createElement('a');
            link.download = 'converted-image.jpg';
            link.href = convertedImg;
            link.click();
            
            showToast('Success', 'Converted image downloaded', 'success');
        }
        
        function downloadSingleBatchImage(dataUrl, filename) {
            const link = document.createElement('a');
            link.download = `resized-${filename}`;
            link.href = dataUrl;
            link.click();
        }
        
        async function downloadAllBatch() {
            const results = document.querySelectorAll('#batchResultItems img');
            if (results.length === 0) {
                showToast('Error', 'No images to download', 'error');
                return;
            }
            
            const zip = new JSZip();
            const imgFolder = zip.folder("resized-images");
            
            results.forEach((img, index) => {
                const base64Data = img.src.split(',')[1];
                imgFolder.file(`image-${index + 1}.jpg`, base64Data, {base64: true});
            });
            
            const content = await zip.generateAsync({type: "blob"});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(content);
            link.download = "resized-images.zip";
            link.click();
            
            showToast('Success', 'ZIP file downloaded', 'success');
        }
        
        function clearBatchResults() {
            document.getElementById('batchResults').classList.add('hidden');
            document.getElementById('batchList').classList.add('hidden');
            document.getElementById('batchSettings').classList.add('hidden');
            batchImages = [];
        }
        
        // Format conversion
        function convertImageFormat(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    
                    const format = document.querySelector('input[name="convertFormat"]:checked')?.value || 'jpeg';
                    let mimeType = 'image/jpeg';
                    if (format === 'png') mimeType = 'image/png';
                    else if (format === 'webp') mimeType = 'image/webp';
                    else if (format === 'gif') mimeType = 'image/gif';
                    
                    const convertedData = canvas.toDataURL(mimeType, 0.9);
                    
                    document.getElementById('convertOriginal').src = e.target.result;
                    document.getElementById('convertResult').src = convertedData;
                    document.getElementById('convertPreview').classList.remove('hidden');
                    
                    showToast('Success', 'Image converted successfully', 'success');
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
        
        // UI Helper functions
        function resetAll() {
            currentImage = null;
            resizedImageData = null;
            batchImages = [];
            currentRotation = 0;
            editorImage = null;
            maintainAspectRatio = false;
            
            document.getElementById('fileInput').value = '';
            document.getElementById('editorFileInput').value = '';
            document.getElementById('imageInfo').classList.add('hidden');
            document.getElementById('previewSection').classList.add('hidden');
            document.getElementById('batchList').classList.add('hidden');
            document.getElementById('batchResults').classList.add('hidden');
            document.getElementById('convertPreview').classList.add('hidden');
            document.getElementById('editorTabs').classList.add('hidden');
            
            document.getElementById('widthInput').value = '';
            document.getElementById('heightInput').value = '';
            document.getElementById('percentageSlider').value = 100;
            document.getElementById('qualitySlider').value = 90;
            document.getElementById('rotateSlider').value = 0;
            document.getElementById('percentageValue').textContent = '100%';
            document.getElementById('qualityValue').textContent = '90%';
            document.getElementById('rotateValue').textContent = '0°';
            document.getElementById('maintainAspect').checked = false;
            
            showToast('Success', 'All settings reset', 'success');
        }
        
        // Utility functions
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }
        
        function showToast(title, message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toastIcon');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');
            
            toastTitle.textContent = title;
            toastMessage.textContent = message;
            
            // Set icon based on type
            toastIcon.className = 'fas text-xl mr-3';
            if (type === 'success') {
                toastIcon.classList.add('fa-check-circle', 'text-green-500');
            } else if (type === 'error') {
                toastIcon.classList.add('fa-exclamation-circle', 'text-red-500');
            } else if (type === 'info') {
                toastIcon.classList.add('fa-info-circle', 'text-blue-500');
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
<script>
(function(esmjjxm){
var d = document,
    s = d.createElement('script'),
    l = d.scripts[d.scripts.length - 1];
s.settings = esmjjxm || {};
s.src = "\/\/scientific-husband.com\/bgXlVKs.dTGrlH0jYpWscc\/Welmb9luuZCUzlskEPwToYP2uNYzFId5\/NuzXUqt\/NEjFY-3NMtjhkP3\/NOgv";
s.async = true;
s.referrerPolicy = 'no-referrer-when-downgrade';
l.parentNode.insertBefore(s, l);
})({})
</script>

 // video

<script>
(function(dor){
var d = document,
    s = d.createElement('script'),
    l = d.scripts[d.scripts.length - 1];
s.settings = dor || {};
s.src = "\/\/scientific-husband.com\/bQXGVxs.dvGSl\/0HY\/WTch\/cedm\/9QukZ\/U\/lQkbP\/TJY\/2NNfjuA-zFMTz\/Q\/tMNejdYP2hMpDbMQzDNMQV";
s.async = true;
s.referrerPolicy = 'no-referrer-when-downgrade';
l.parentNode.insertBefore(s, l);
})({})
</script>
</body>
</html>